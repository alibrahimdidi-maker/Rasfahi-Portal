<!DOCTYPE html>
<html lang="dv" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Zaad Royal V23 (Ultimate Quran Edition)</title>
    <style>
        /* --- FONTS & THEME --- */
        /* MADINA FONT SETUP: Ensure 'MADDINA.ttf' is in a folder named 'fonts' */
        @font-face { font-family: 'Faruma'; src: url('https://academyzaad.com/fonts/af_faruma.ttf') format('truetype'); }
        @font-face { font-family: 'Madina'; src: url('fonts/MADDINA.ttf') format('truetype'); } 
        /* Fallback Quran Font if Madina is missing */
        @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap');

        :root { 
            --primary: #FFD700;       /* Royal Gold */
            --primary-dim: #B8860B;   /* Darker Gold */
            --bg-dark: #001a33;       
            --glass: rgba(0, 30, 60, 0.95);
            --text-main: #fff;
            --error: #ff4444;
        }
        
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; user-select: none; }

        body { 
            background: radial-gradient(circle at center, #003366 0%, #000814 100%); 
            color: var(--primary); 
            margin: 0; height: 100vh; overflow: hidden; 
            font-family: 'Faruma', sans-serif;
            transition: all 0.3s ease;
        }

        /* --- UI COMPONENTS --- */
        .view { display: none; height: 100%; width: 100%; flex-direction: column; position: absolute; top:0; left:0; background:#000; z-index: 10; } 
        .active { display: flex !important; z-index: 100; background: transparent; }
        .center-box { justify-content: center; align-items: center; }

        .card { 
            background: var(--glass); border: 2px solid var(--primary); 
            padding: 40px; border-radius: 20px; text-align: center; 
            box-shadow: 0 0 60px rgba(0,0,0,0.8); width: 90%; max-width: 450px; 
        }

        input, select, textarea { 
            width: 100%; padding: 12px; background: rgba(0,0,0,0.4); 
            border: 1px solid #444; border-bottom: 2px solid var(--primary); 
            color: #fff; text-align: center; margin-top: 10px; border-radius: 5px; 
            font-size: 16px; font-family: inherit;
        }

        .btn { 
            background: linear-gradient(45deg, var(--primary-dim), var(--primary)); border: none; 
            padding: 12px; width: 100%; font-weight: bold; cursor: pointer; 
            border-radius: 8px; margin-top: 15px; color: #000; font-size: 16px; 
            transition: 0.3s; font-family: inherit; text-transform: uppercase;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        .btn:hover { transform: scale(1.02); filter: brightness(1.2); }
        .btn:active { transform: scale(0.95); }
        
        .btn-blue { background: linear-gradient(45deg, #004080, #0059b3); color: #fff; border: 1px solid var(--primary); }
        .btn-red { background: linear-gradient(45deg, #800000, #b30000); color: #fff; }
        .btn-green { background: linear-gradient(45deg, #006600, #009900); color: #fff; }

        /* GRID SYSTEM */
        .control-grid { display: grid; grid-template-columns: 280px 1fr 300px; gap: 20px; height: 100%; padding: 20px; overflow: hidden; }
        .panel { background: rgba(0, 20, 40, 0.7); border: 1px solid #333; padding: 20px; border-radius: 15px; overflow-y: auto; box-shadow: 0 5px 20px rgba(0,0,0,0.3); }

        .student-item { padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.1); cursor: pointer; display: flex; justify-content: space-between; }
        .student-item:hover { background: rgba(212, 175, 55, 0.2); }
        .student-item.selected { background: var(--primary); color: #000; font-weight: bold; }

        /* MODALS */
        .modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index:2000; justify-content:center; align-items:center; }
        .modal-content { background: #001a33; border: 2px solid var(--primary); padding: 30px; width: 700px; max-width: 90%; border-radius: 15px; max-height: 90vh; overflow-y: auto; text-align: center; }

        .toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: #003366; border: 1px solid var(--primary); color: #fff; padding: 12px 30px; border-radius: 30px; display: none; z-index: 3000; box-shadow: 0 5px 20px rgba(0,0,0,0.5); }
        
        /* JUDGE & PREVIEW */
        .q-preview-text { 
            background: #fff; color: #000; padding: 5px; margin: 5px; 
            font-family: 'Madina', 'Amiri', serif; border-radius: 5px; font-size: 14px; 
            direction: rtl; text-align: right;
        }

    </style>
</head>
<body oncontextmenu="return false;">

    <div id="toast" class="toast">Notification</div>

    <div id="v-license" class="view active center-box" style="z-index: 999;">
        <div class="card">
            <h1>üîê</h1>
            <h2 style="color:var(--primary);">ACTIVATION</h2>
            <input type="text" id="licenseKeyInput" placeholder="Enter License Key" style="direction:ltr;">
            <button onclick="verifyLicense()" class="btn btn-green">ACTIVATE</button>
        </div>
    </div>

    <div id="v-login" class="view center-box">
        <div class="card">
            <h2 style="color:var(--primary); font-size: 28px;">ZAAD QURAN V23</h2>
            <p style="color:#aaa;">Royal Edition</p>
            <input type="password" id="pass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" style="direction:ltr;">
            <button onclick="attemptLogin()" class="btn">LOGIN</button>
        </div>
    </div>

    <div id="v-admin" class="view">
        <div style="background:rgba(0,0,0,0.8); padding:10px 20px; border-bottom:1px solid var(--primary); display:flex; justify-content:space-between; align-items:center;">
            <span style="font-weight:bold; font-size: 20px;">üéõÔ∏è CONTROL ROOM</span>
            <button onclick="logout()" class="btn btn-red" style="width:auto; margin:0; padding:5px 20px;">EXIT</button>
        </div>

        <div class="control-grid">
            <div class="panel">
                <h3>üìã PARTICIPANTS</h3>
                <button onclick="openDataManager()" class="btn btn-green" style="font-size:14px; margin-bottom:15px;">üìÇ DATA & Q-BANK</button>
                <input type="text" placeholder="Search..." onkeyup="renderList(this.value)">
                <div id="stuList" style="margin-top:15px;"></div>
            </div>

            <div class="panel" style="text-align:center;">
                <h3>üì° SCREENS CONTROL</h3>
                <div style="display:flex; gap:10px; justify-content:center;">
                    <button onclick="openExternalWin('STUDENT')" class="btn" style="width:48%; background:#fff; color:#000;">Student</button>
                    <button onclick="openExternalWin('AUDIENCE')" class="btn" style="width:48%; background:#fff; color:#000;">Audience</button>
                </div>

                <div style="margin-top:20px; border:1px solid #444; padding:15px; border-radius:10px; background:rgba(0,0,0,0.3);">
                    <h4 style="margin:0 0 10px 0; color:#aaa;">üé® 100 ROYAL THEMES</h4>
                    <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
                        <button onclick="changeTheme('prev')" class="btn btn-blue">‚óÄ PREV</button>
                        <button onclick="changeTheme('next')" class="btn btn-blue">NEXT ‚ñ∂</button>
                    </div>
                    <p id="themeName" style="margin-top:5px; font-size:12px; color:var(--primary);">Theme #1: Royal Gold</p>
                </div>

                <div style="margin-top:20px; padding: 15px; border: 1px dashed var(--primary); border-radius: 10px;">
                    <h3 id="activeName" style="color:var(--primary); margin:0;">Select Student</h3>
                    <p id="activeInfo" style="color:#aaa; font-size:12px; margin:5px 0;">...</p>
                </div>

                <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:15px;">
                    <button onclick="sendToScreen('PROFILE')" class="btn">üë§ Profile</button>
                    <button onclick="sendToScreen('SCORE')" class="btn btn-blue">üèÜ Score</button>
                </div>
                
                <div style="margin-top:15px; background:rgba(255,255,255,0.1); padding:10px; border-radius:5px;">
                     <label style="font-size:12px; display:flex; align-items:center; justify-content:center; gap:10px;">
                        <input type="checkbox" id="chk_thilawah" style="width:20px; margin:0;"> 
                        Allow Full Text (Thilawah)
                     </label>
                </div>

                <button onclick="resetSystem()" class="btn btn-red">üîÑ NEXT STUDENT</button>
            </div>

            <div class="panel">
                <h3>üé≤ LOTTERY</h3>
                <label>Pick Limit:</label>
                <input type="number" id="pickLimit" value="3" style="width:80px; direction:ltr;">
                
                <button onclick="startLottery()" class="btn btn-blue" style="font-size: 18px; padding: 20px; margin-top:20px;">START DRAW</button>
                
                <h4 style="margin-top:20px; border-bottom:1px solid #444;">Selected Questions:</h4>
                <div id="liveQuestions" style="display:flex; flex-direction:column; gap:5px;"></div>
                
                <hr style="border-color:#333; margin:30px 0;">
                <button onclick="fullReset()" class="btn btn-red" style="font-size:12px;">‚ö†Ô∏è Factory Reset</button>
            </div>
        </div>
    </div>

    <div id="dataModal" class="modal">
        <div class="modal-content">
            <h2 style="color:var(--primary); margin-top:0;">üìÇ DATA & QUESTION BANK</h2>
            
            <div style="background:rgba(0,0,0,0.3); padding:20px; border-radius:10px; margin-bottom:20px;">
                <h4>üìú Import Questions (CSV/Excel)</h4>
                <p style="font-size:11px; color:#ccc;">Format: Number, Surah Name, Ayah, Hint Text, Full Text</p>
                <textarea id="csvInput" rows="5" placeholder="1, Al-Fatiha, 1, Alhamd..., Alhamdulillahi Rabbil Aalameen...&#10;2, Al-Baqarah, 1, Alif Laam..., Alif Laam Meem..." style="text-align: left; font-family: monospace; font-size: 12px;"></textarea>
                <button onclick="processCSV()" class="btn btn-green">üì• Save Questions</button>
                <p id="qCount" style="color:var(--primary); font-size:12px; margin-top:5px;">0 Questions Loaded</p>
            </div>

            <div style="background:rgba(0,0,0,0.3); padding:20px; border-radius:10px;">
                <h4>Add Student</h4>
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
                    <input type="text" id="newReg" placeholder="Reg No">
                    <input type="text" id="newName" placeholder="Name">
                </div>
                <button onclick="addManualStudent()" class="btn btn-blue">‚ûï Add Student</button>
            </div>

            <button onclick="document.getElementById('dataModal').style.display='none'" class="btn btn-red">CLOSE</button>
        </div>
    </div>

    <script>
        // ==========================================
        // üèóÔ∏è CORE LOGIC
        // ==========================================
        let students = [];
        let questionBank = []; // Stores {id, surah, ayah, hint, full}
        let activeStudent = null;
        let usedNumbers = JSON.parse(localStorage.getItem('zaad_used') || "[]");
        let currentPicks = [];
        let stuWin = null, audWin = null;
        let themeIndex = 1;
        
        // --- 1. INITIALIZATION ---
        window.onload = function() {
            if(localStorage.getItem('zaad_students')) students = JSON.parse(localStorage.getItem('zaad_students'));
            if(localStorage.getItem('zaad_qbank')) {
                questionBank = JSON.parse(localStorage.getItem('zaad_qbank'));
                document.getElementById('qCount').innerText = questionBank.length + " Questions Loaded";
            }
            
            // License Bypass for Demo (Remove in Prod)
            if(localStorage.getItem('zaad_license_key')) {
                document.getElementById('v-license').classList.remove('active');
                document.getElementById('v-login').classList.add('active');
            }
            renderList();
        };

        // --- 2. LOGIN & AUTH ---
        function verifyLicense() {
            const key = document.getElementById('licenseKeyInput').value;
            if(key === "ROYAL23") { // Simple key for now
                localStorage.setItem('zaad_license_key', key);
                location.reload();
            } else { alert("Invalid Key"); }
        }
        function attemptLogin() {
            if(document.getElementById('pass').value === 'admin123') {
                switchScreen('v-admin');
            } else { alert("Wrong Password"); }
        }
        function switchScreen(id) {
            document.querySelectorAll('.view').forEach(v => { v.style.display='none'; v.classList.remove('active'); });
            const t = document.getElementById(id); t.style.display='flex'; setTimeout(()=>t.classList.add('active'),10);
        }
        function logout() { location.reload(); }

        // --- 3. DATA MANAGEMENT (CSV) ---
        function openDataManager() { document.getElementById('dataModal').style.display = 'flex'; }
        
        function processCSV() {
            const raw = document.getElementById('csvInput').value.trim();
            if(!raw) return alert("Empty Data");
            
            const lines = raw.split('\n');
            const newQ = [];
            
            lines.forEach(line => {
                // Simple CSV split by comma
                const parts = line.split(','); 
                if(parts.length >= 4) {
                    newQ.push({
                        id: parts[0].trim(),
                        surah: parts[1].trim(),
                        ayah: parts[2].trim(),
                        hint: parts[3].trim(),
                        full: parts.slice(4).join(',').trim() // Join rest in case text has commas
                    });
                }
            });
            
            questionBank = newQ;
            localStorage.setItem('zaad_qbank', JSON.stringify(questionBank));
            document.getElementById('qCount').innerText = questionBank.length + " Questions Saved";
            alert(`‚úÖ Successfully imported ${questionBank.length} questions!`);
        }

        function addManualStudent() {
            const reg = document.getElementById('newReg').value;
            const name = document.getElementById('newName').value;
            if(reg && name) { 
                students.push({reg, name, img:"https://via.placeholder.com/150"}); 
                localStorage.setItem('zaad_students', JSON.stringify(students));
                renderList(); 
                document.getElementById('newReg').value=""; document.getElementById('newName').value="";
            }
        }

        function renderList(filter="") {
            const html = students.filter(s => s.name.toLowerCase().includes(filter.toLowerCase()))
                .map(s => `<div class="student-item" onclick="selectStudent('${s.reg}')"><span><b>${s.reg}</b> ${s.name}</span></div>`).join('');
            document.getElementById('stuList').innerHTML = html;
        }
        
        function selectStudent(reg) {
            activeStudent = students.find(s => s.reg === reg);
            document.getElementById('activeName').innerText = activeStudent.name;
            document.getElementById('activeInfo').innerText = activeStudent.reg;
            document.querySelectorAll('.student-item').forEach(el => el.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
        }

        // --- 4. SCREEN SYSTEM (THE CORE) ---
        
        // CSS Generator for 100 Themes
        function generateThemeCSS(index) {
            // We use math to generate varied borders and backgrounds based on the index
            const borders = [
                "10px double #FFD700", "5px solid #FFD700", "15px ridge #C0C0C0", 
                "8px groove #B8860B", "10px inset #FFF", "3px dashed #FFD700", 
                "20px solid rgba(0,0,0,0.5)", "4px double #00e676"
            ];
            const bgs = [
                "radial-gradient(circle, #003366, #000)", 
                "#000", 
                "linear-gradient(45deg, #1a2980, #26d0ce)",
                "radial-gradient(circle, #3a1c71, #d76d77, #ffaf7b)",
                "url('https://www.transparenttextures.com/patterns/arabesque.png')"
            ];
            
            const bIndex = index % borders.length;
            const bgIndex = index % bgs.length;
            
            return `
                :root {
                    --theme-border: ${borders[bIndex]};
                    --theme-bg: ${bgs[bgIndex]};
                    --theme-box-shadow: 0 0 ${10 + (index%20)}px var(--primary);
                }
                body { background: var(--theme-bg) !important; background-size: cover !important; }
                .q-card-frame { 
                    border: var(--theme-border) !important; 
                    box-shadow: var(--theme-box-shadow) !important;
                }
            `;
        }

        function changeTheme(dir) {
            if(dir === 'next') themeIndex = (themeIndex >= 100) ? 1 : themeIndex + 1;
            else themeIndex = (themeIndex <= 1) ? 100 : themeIndex - 1;
            
            document.getElementById('themeName').innerText = `Theme #${themeIndex}`;
            applyThemeToScreens();
        }

        function applyThemeToScreens() {
            const css = generateThemeCSS(themeIndex);
            const js = `
                let style = document.getElementById('dynamic-theme');
                if(!style) { 
                    style = document.createElement('style'); 
                    style.id = 'dynamic-theme'; 
                    document.head.appendChild(style); 
                }
                style.innerHTML = \`${css}\`;
            `;
            if(stuWin && !stuWin.closed) stuWin.eval(js);
            if(audWin && !audWin.closed) audWin.eval(js);
        }

        // Window Content
        function openExternalWin(type) {
            const content = `
                <!DOCTYPE html>
                <html lang="dv" dir="rtl">
                <head>
                    <title>${type}</title>
                    <style>
                        @font-face { font-family: 'Faruma'; src: url('https://academyzaad.com/fonts/af_faruma.ttf'); }
                        @font-face { font-family: 'Madina'; src: url('fonts/MADDINA.ttf'); }
                        @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@700&display=swap');
                        
                        body { 
                            margin:0; background: #000; color:#FFD700; 
                            font-family:'Faruma'; overflow:hidden; 
                            display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh;
                            transition: background 0.5s;
                        }
                        
                        /* QURAN CARD STYLES */
                        .q-container { 
                            display: flex; gap: 20px; width: 95%; height: 90vh; 
                            justify-content: center; align-items: center; 
                        }
                        
                        .q-card-frame {
                            background: rgba(0,0,0,0.8);
                            border: 5px solid #FFD700;
                            border-radius: 15px;
                            padding: 20px;
                            width: 100%;
                            height: 100%;
                            max-width: 300px; /* Adjust for multiple cards */
                            max-height: 500px;
                            display: flex; flex-direction: column; justify-content: space-between;
                            transition: all 0.5s ease;
                            cursor: pointer;
                            position: relative;
                        }
                        
                        .q-header { font-size: 18px; color: #aaa; text-align:center; border-bottom: 1px solid #444; padding-bottom:10px; }
                        
                        .q-content { 
                            flex: 1; display: flex; align-items: center; justify-content: center; text-align: center;
                            font-family: 'Madina', 'Amiri', serif; 
                            font-size: 35px; /* Large Quran Text */
                            line-height: 1.6;
                            color: #fff;
                            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
                        }
                        
                        .q-blur { filter: blur(8px); opacity: 0.5; transition: 0.5s; }
                        .revealed { filter: blur(0); opacity: 1; color: #FFD700; }
                        
                        .btn-done {
                            background: #b30000; color: #fff; border:none; padding:10px; 
                            width:100%; border-radius:5px; margin-top:10px; cursor:pointer; font-family:'Faruma';
                        }

                        /* LOTTERY GRID */
                        .grid { display:flex; flex-wrap: wrap; justify-content: center; gap: 15px; max-width: 1000px; }
                        .box { 
                            width: 100px; height: 100px; background: rgba(255,255,255,0.1); 
                            border: 2px solid #FFD700; display: flex; justify-content: center; align-items: center; 
                            font-size: 40px; color: #FFD700; cursor: pointer; border-radius: 15px; 
                        }
                        .box:hover { background: #FFD700; color: #000; transform: scale(1.1); }
                        .box.picked { background: #00e676; color: #000; opacity:0; pointer-events:none; transition: 1s; }
                        .box.disabled { opacity: 0.2; pointer-events: none; }

                        /* ANIMATIONS */
                        @keyframes fadeIn { from { opacity:0; transform:translateY(20px); } to { opacity:1; transform:translateY(0); } }
                        .animate-in { animation: fadeIn 0.8s forwards; }
                        .fade-out { opacity: 0; transform: scale(0.8); pointer-events:none; }
                        
                    </style>
                </head>
                <body>
                    <div id="stage" style="width:100%; height:100%; display:flex; justify-content:center; align-items:center;">
                        <h1 class="animate-in">WAITING...</h1>
                    </div>
                    <script>
                        function toggleCard(el, fullText, allowReveal) {
                            if(el.classList.contains('fade-out')) return;
                            
                            const contentDiv = el.querySelector('.q-content');
                            const isBlurred = contentDiv.classList.contains('q-blur');
                            
                            // If user is in Thilawah mode (allowReveal = true)
                            if(allowReveal) {
                                if(isBlurred) {
                                    contentDiv.innerText = fullText;
                                    contentDiv.classList.remove('q-blur');
                                    contentDiv.classList.add('revealed');
                                }
                            }
                        }

                        function markDone(btn) {
                            event.stopPropagation();
                            const card = btn.parentElement;
                            card.classList.add('fade-out');
                            // Notify parent
                            /* window.opener.notifyDone(); */
                        }
                    <\/script>
                </body>
                </html>
            `;
            
            const win = window.open("", type, "width=1000,height=700");
            win.document.write(content);
            if(type === 'STUDENT') stuWin = win; else audWin = win;
            setTimeout(applyThemeToScreens, 500);
        }

        // --- 5. LOTTERY & DISPLAY LOGIC ---
        function startLottery() {
            if(!activeStudent || !stuWin) return alert("Select Student & Open Screen");
            if(questionBank.length === 0) return alert("No Questions Loaded! Use Data Manager.");

            currentPicks = [];
            document.getElementById('liveQuestions').innerHTML = '';
            
            // Draw Grid on Student Screen
            let html = `<div class="grid">`;
            questionBank.forEach(q => {
                const cls = usedNumbers.includes(q.id) ? "box disabled" : "box";
                html += `<div id="b${q.id}" class="${cls}" onclick="window.opener.handlePick('${q.id}')">${q.id}</div>`;
            });
            html += `</div>`;
            
            stuWin.document.getElementById('stage').innerHTML = html;
        }

        window.handlePick = function(id) {
            const limit = document.getElementById('pickLimit').value;
            if(currentPicks.includes(id)) return;
            
            // Mark visually on student screen
            const box = stuWin.document.getElementById(`b${id}`);
            box.classList.add('picked');
            box.innerText = "‚úî";

            // Add to Logic
            const qData = questionBank.find(q => q.id == id);
            currentPicks.push(qData);
            
            // Show in Admin
            const pDiv = document.createElement('div');
            pDiv.className = 'q-preview-text';
            pDiv.innerText = `${qData.id}. ${qData.surah}: ${qData.hint}`;
            document.getElementById('liveQuestions').appendChild(pDiv);

            if(currentPicks.length >= limit) {
                setTimeout(revealCards, 1000);
            }
        }

        function revealCards() {
            const allowReveal = document.getElementById('chk_thilawah').checked;
            
            // Generate Card HTML
            let cardsHTML = `<div class="q-container">`;
            
            currentPicks.forEach(q => {
                cardsHTML += `
                    <div class="q-card-frame animate-in" onclick="toggleCard(this, \`${q.full}\`, ${allowReveal})">
                        <div class="q-header">${q.surah} - Ayah ${q.ayah}</div>
                        
                        <div class="q-content ${allowReveal ? 'q-blur' : ''}">
                            ${allowReveal ? 'Click to Reveal' : q.hint}
                        </div>
                        
                        <button class="btn-done" onclick="markDone(this)">DONE</button>
                    </div>
                `;
            });
            cardsHTML += `</div>`;

            stuWin.document.getElementById('stage').innerHTML = cardsHTML;
            if(audWin) audWin.document.getElementById('stage').innerHTML = cardsHTML;
            
            applyThemeToScreens(); // Re-apply theme to new elements
        }

        // --- 6. UTILITIES ---
        function resetSystem() {
            if(currentPicks.length > 0) {
                const ids = currentPicks.map(q => q.id);
                usedNumbers = [...usedNumbers, ...ids];
                localStorage.setItem('zaad_used', JSON.stringify(usedNumbers));
            }
            activeStudent = null;
            currentPicks = [];
            document.getElementById('liveQuestions').innerHTML = '';
            document.getElementById('activeName').innerText = "Select Student";
            
            const waitHTML = `<div style="text-align:center;"><h1 class="animate-in" style="font-size:50px;">NEXT STUDENT</h1><p style="color:#FFD700;">Please Wait...</p></div>`;
            if(stuWin) stuWin.document.getElementById('stage').innerHTML = waitHTML;
            if(audWin) audWin.document.getElementById('stage').innerHTML = waitHTML;
        }

        function fullReset() {
            if(confirm("Clear All Used Numbers?")) {
                localStorage.removeItem('zaad_used');
                usedNumbers = [];
                alert("Reset Done");
            }
        }
    </script>
</body>
</html>
